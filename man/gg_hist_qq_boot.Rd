% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gg_hist_qq_boot.R
\name{gg_hist_qq_boot}
\alias{gg_hist_qq_boot}
\title{Diagnostic Plots of Bootstrap Estimates (ggplot2, Modular)}
\usage{
gg_hist_qq_boot(
  object,
  param,
  standardized = NULL,
  bins = 35,
  show_ci = TRUE,
  show_mean = TRUE,
  show_sd_arrow = TRUE,
  show_qq = TRUE,
  show_hist = TRUE,
  text_size = 3,
  ci_label_digits = 3,
  mean_label_digits = 3,
  sd_label_digits = 3,
  sd_clip_to_density = TRUE,
  sd_arrow_height = 0.58,
  trim_quantiles = NULL,
  ci_line_color = "#D62728",
  dens_line_color = "#8B0000CC",
  bar_fill = "#5DADE233",
  bar_color = "#1B4F72",
  enforce_serif = TRUE,
  theme_override = NULL,
  dens_adjust = 1,
  dens_from = NULL,
  dens_to = NULL,
  output = c("draw", "ggplot", "data"),
  return = NULL,
  ...
)
}
\arguments{
\item{object}{A \code{lavaan} object with stored bootstrap results, or
an object of class \code{sbt_std_boot} (from \code{\link[=standardizedSolution_boot]{standardizedSolution_boot()}}),
or \code{sbt_ustd_boot} (from \code{\link[=parameterEstimates_boot]{parameterEstimates_boot()}}).}

\item{param}{Character. Name of the parameter to plot
(as in \code{coef()} or \code{"lhs op rhs"} form, e.g., \code{"speed=~x9"}).}

\item{standardized}{Logical. Whether to use standardized bootstrap estimates.
Ignored for \code{sbt_std_boot} / \code{sbt_ustd_boot}; required for \code{lavaan} objects.}

\item{bins}{Integer. Number of histogram bins (if \code{show_hist = TRUE}). Default = 35.}

\item{show_ci}{Logical. Draw CI short dashed lines and labels. Default = TRUE.}

\item{show_mean}{Logical. Draw mean vertical dashed line and label. Default = TRUE.}

\item{show_sd_arrow}{Logical. Draw ±SD arrows and labels. Default = TRUE.}

\item{show_qq}{Logical. Add side-by-side QQ plot (uses \code{patchwork} if available). Default = TRUE.}

\item{show_hist}{Logical. Draw histogram (otherwise density only). Default = TRUE.}

\item{text_size}{Numeric. Font size for labels. Default = 3.}

\item{ci_label_digits}{Integer. Digits for CI labels. Default = 3.}

\item{mean_label_digits}{Integer. Digits for mean label. Default = 3.}

\item{sd_label_digits}{Integer. Digits for SD label. Default = 3.}

\item{sd_clip_to_density}{Logical. If TRUE, clip the SD double-arrow within the density curve. Default = TRUE.}

\item{sd_arrow_height}{Numeric in (0,1]. Relative height (in units of ymax) for the SD arrow. Default = 0.58.}

\item{trim_quantiles}{Length-2 numeric. Quantile range to trim x-axis (e.g., \code{c(.005, .995)}); NULL = no trimming.}

\item{ci_line_color}{Color for CI short dashed lines. Default = \code{"#D62728"}.}

\item{dens_line_color}{Color for density curve. Default = \code{"#8B0000CC"}.}

\item{bar_fill}{Fill color for histogram (if \code{show_hist = TRUE}). Default = \code{"#5DADE233"}.}

\item{bar_color}{Border color for histogram. Default = \code{"#1B4F72"}.}

\item{enforce_serif}{Logical. If TRUE, use serif base family. Default = TRUE.}

\item{theme_override}{A \code{ggplot2::theme()} to be added on top of the base theme. Default = NULL.}

\item{dens_adjust}{Numeric ≥ 0. Adjust bandwidth for \code{stats::density()}. Default = 1.}

\item{dens_from, dens_to}{Optional numeric. Force \code{from}/\code{to} range for \code{density()}. Default = NULL (use min/max of \code{t}).}

\item{output}{One of \code{"draw"}, \code{"ggplot"}, or \code{"data"}. See Value. (Backward compatible with \code{return}.)}

\item{...}{Additional arguments passed to layers, e.g., \code{geom_density(adjust=...)}, \code{geom_histogram(...)}.}
}
\value{
\itemize{
\item If \code{output = "draw"}: draws the plot and invisibly returns the ggplot object;
\item If \code{output = "ggplot"}: returns a ggplot object (no drawing);
\item If \code{output = "data"}: returns a list with
\itemize{
\item \code{t}: bootstrap draws;
\item \code{t0}: point estimate;
\item \code{sd}: sample standard deviation;
\item \code{hist}: data frame for histogram layer;
\item \code{dens}: data frame for density curve (\code{x}, \code{y});
\item \code{ci}: list with \code{lower}, \code{upper}, \code{y_lower}, \code{y_upper}.
}
}
}
\description{
Produce diagnostic plots of bootstrap estimates using \strong{ggplot2}.
Compared to \code{\link[=hist_qq_boot]{hist_qq_boot()}} (base graphics), this function is \emph{modular} and \emph{modern}:
optional layers (histogram, mean line, CI, SD arrow, QQ), and the ability to
return only the data or the ggplot object for further customization.
}
\details{
\itemize{
\item For free (unstandardized) parameters, bootstrap draws are extracted directly
from the \code{lavaan} object;
\item For user-defined parameters or standardized solutions, \code{\link[=store_boot]{store_boot()}} or
\code{\link[=standardizedSolution_boot]{standardizedSolution_boot()}} must be called in advance;
\item Supports objects of class \code{sbt_std_boot} (standardized) and \code{sbt_ustd_boot} (unstandardized).
}

\strong{Return mode}
\itemize{
\item \code{output = "draw"}: draw the plot (default) and invisibly return the ggplot object;
\item \code{output = "ggplot"}: return the ggplot object without drawing;
\item \code{output = "data"}: return a list containing the data frames for histogram,
density, and CI positions (class \code{"sbt_boot_plotdata"}).
}

\strong{Axis control}
\itemize{
\item By default, the x-axis has a small margin beyond the observed range;
set \code{trim_quantiles = c(.01, .99)} to crop extreme tails by quantiles.
}

\strong{Optional layers}
\itemize{
\item \code{show_hist}, \code{show_mean}, \code{show_ci}, \code{show_sd_arrow}, \code{show_qq}.
}
}
\references{
Rousselet, G. A., Pernet, C. R., & Wilcox, R. R. (2021).
The percentile bootstrap: A primer with step-by-step instructions in R.
\emph{Advances in Methods and Practices in Psychological Science}, 4(1), 1–10. \doi{10.1177/2515245920911881}
}
\seealso{
\code{\link[=store_boot]{store_boot()}}, \code{\link[=standardizedSolution_boot]{standardizedSolution_boot()}}, \code{\link[=hist_qq_boot]{hist_qq_boot()}}
}
